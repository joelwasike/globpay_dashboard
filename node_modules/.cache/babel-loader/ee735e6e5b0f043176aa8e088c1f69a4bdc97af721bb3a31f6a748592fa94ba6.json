{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth}from'../contexts/AuthContext';import{CreditCardIcon,BanknotesIcon,ArrowUpIcon,ArrowDownIcon,ClockIcon,CheckCircleIcon,XCircleIcon,FunnelIcon,MagnifyingGlassIcon,DevicePhoneMobileIcon,BuildingLibraryIcon}from'@heroicons/react/24/outline';import{format}from'date-fns';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Transactions=()=>{const{api,user}=useAuth();const[transactions,setTransactions]=useState([]);const[loading,setLoading]=useState(true);const[filter,setFilter]=useState('all');const[statusFilter,setStatusFilter]=useState('all');const[searchTerm,setSearchTerm]=useState('');const[dateRange,setDateRange]=useState({startDate:'',endDate:''});useEffect(()=>{loadTransactions();},[filter]);const loadTransactions=async()=>{try{setLoading(true);let endpoint='/api/v1/transaction/list';// Apply filters based on selection\nif(filter==='mobile'){endpoint='/api/v1/transaction/read/payins';}else if(filter==='bank'){endpoint='/api/v1/transaction/read/bank';}else if(filter==='card'){endpoint='/api/v1/transaction/read/card';}else if(filter==='payouts'){endpoint='/api/v1/transaction/read/mobile/payouts';}console.log('Loading transactions from endpoint:',endpoint);console.log('API configuration:',{baseURL:api.defaults.baseURL,headers:api.defaults.headers,fullURL:`${api.defaults.baseURL}${endpoint}`});const response=await api.get(endpoint);console.log('API Response:',response);console.log('Response data:',response.data);// Handle the correct response format\nif(response.data&&response.data.Transactions){console.log('Found Transactions array with',response.data.Transactions.length,'transactions');setTransactions(response.data.Transactions);}else if(response.data&&response.data.transactions){console.log('Found transactions array with',response.data.transactions.length,'transactions');setTransactions(response.data.transactions);}else{console.log('No transactions found in response, using mock data');// Mock data for demo\nsetTransactions([{id:14401,amount:200,currency:'KES',transaction_status:'SUCCESS',date_added:1755762760,source_of_funds:'M-Pesa',transaction_report:'withdraw',msisdn:'+254704 763 887',external_id:'App-e6d4a132-c083-488e-aa7a-5923ab614c52',checkout_request_id:'AG_20250821_204024443a229f501022'},{id:14400,amount:300,currency:'KES',transaction_status:'PENDING',date_added:1755760510,source_of_funds:'M-Pesa',transaction_report:'withdraw',msisdn:'+254743331886',external_id:'App-fac47c92-ac24-4f10-8133-f6c470e85e2f',checkout_request_id:'AG_20250821_20502dbf96c528349d5e'},{id:14399,amount:15000,currency:'USD',transaction_status:'SUCCESS',date_added:1755758260,source_of_funds:'Card',transaction_report:'payment',msisdn:'',external_id:'App-card-payment-123',checkout_request_id:'CARD_20250821_123456'},{id:14398,amount:50000,currency:'KES',transaction_status:'FAILED',date_added:1755756010,source_of_funds:'Bank',transaction_report:'transfer',msisdn:'',external_id:'App-bank-transfer-456',checkout_request_id:'BANK_20250821_789012'}]);}}catch(error){var _error$response,_error$response2,_error$response3,_error$config,_error$config2,_error$config3;console.error('Error loading transactions:',error);console.error('Error details:',{message:error.message,status:(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status,statusText:(_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.statusText,data:(_error$response3=error.response)===null||_error$response3===void 0?void 0:_error$response3.data,config:{url:(_error$config=error.config)===null||_error$config===void 0?void 0:_error$config.url,method:(_error$config2=error.config)===null||_error$config2===void 0?void 0:_error$config2.method,headers:(_error$config3=error.config)===null||_error$config3===void 0?void 0:_error$config3.headers}});// Set mock data on error for demo\nsetTransactions([{id:14401,amount:200,currency:'KES',transaction_status:'SUCCESS',date_added:1755762760,source_of_funds:'M-Pesa',transaction_report:'withdraw',msisdn:'+254704 763 887',external_id:'App-e6d4a132-c083-488e-aa7a-5923ab614c52',checkout_request_id:'AG_20250821_204024443a229f501022'},{id:14400,amount:300,currency:'KES',transaction_status:'PENDING',date_added:1755760510,source_of_funds:'M-Pesa',transaction_report:'withdraw',msisdn:'+254743331886',external_id:'App-fac47c92-ac24-4f10-8133-f6c470e85e2f',checkout_request_id:'AG_20250821_20502dbf96c528349d5e'}]);}finally{setLoading(false);}};const getStatusIcon=status=>{switch(status){case'SUCCESS':case'COMPLETE':return/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-5 w-5 text-green-500\"});case'PENDING':return/*#__PURE__*/_jsx(ClockIcon,{className:\"h-5 w-5 text-yellow-500\"});case'FAILED':return/*#__PURE__*/_jsx(XCircleIcon,{className:\"h-5 w-5 text-red-500\"});default:return/*#__PURE__*/_jsx(ClockIcon,{className:\"h-5 w-5 text-gray-500\"});}};const getStatusColor=status=>{switch(status){case'SUCCESS':case'COMPLETE':return'text-green-600 bg-green-100';case'PENDING':return'text-yellow-600 bg-yellow-100';case'FAILED':return'text-red-600 bg-red-100';default:return'text-gray-600 bg-gray-100';}};const getTypeIcon=sourceOfFunds=>{switch(sourceOfFunds){case'M-Pesa':return/*#__PURE__*/_jsx(DevicePhoneMobileIcon,{className:\"h-5 w-5 text-[#015F6B]\"});case'Card':return/*#__PURE__*/_jsx(CreditCardIcon,{className:\"h-5 w-5 text-[#00B7AA]\"});case'Bank':return/*#__PURE__*/_jsx(BuildingLibraryIcon,{className:\"h-5 w-5 text-[#B5AFB2]\"});default:return/*#__PURE__*/_jsx(BanknotesIcon,{className:\"h-5 w-5 text-gray-500\"});}};const getTransactionType=transaction=>{if(transaction.transaction_report==='withdraw'){return'payout';}else if(transaction.transaction_report==='payment'){return'payment';}else if(transaction.transaction_report==='transfer'){return'transfer';}return'payment';};const filteredTransactions=transactions.filter(transaction=>{var _transaction$external,_transaction$checkout,_transaction$msisdn,_transaction$source_o;const matchesSearch=((_transaction$external=transaction.external_id)===null||_transaction$external===void 0?void 0:_transaction$external.toLowerCase().includes(searchTerm.toLowerCase()))||((_transaction$checkout=transaction.checkout_request_id)===null||_transaction$checkout===void 0?void 0:_transaction$checkout.toLowerCase().includes(searchTerm.toLowerCase()))||((_transaction$msisdn=transaction.msisdn)===null||_transaction$msisdn===void 0?void 0:_transaction$msisdn.toLowerCase().includes(searchTerm.toLowerCase()))||((_transaction$source_o=transaction.source_of_funds)===null||_transaction$source_o===void 0?void 0:_transaction$source_o.toLowerCase().includes(searchTerm.toLowerCase()));const status=(transaction.transaction_status||'').toUpperCase();const matchesStatus=statusFilter==='all'||status===statusFilter||statusFilter==='SUCCESS'&&status==='COMPLETE';return matchesSearch&&matchesStatus;});const handleFilterChange=newFilter=>{setFilter(newFilter);};const handleDateFilter=async()=>{if(dateRange.startDate&&dateRange.endDate){try{setLoading(true);const startTimestamp=Math.floor(new Date(dateRange.startDate).getTime()/1000);const endTimestamp=Math.floor(new Date(dateRange.endDate).getTime()/1000);const response=await api.get(`/api/v1/transaction/filter?start_date=${startTimestamp}&end_date=${endTimestamp}`);if(response.data&&response.data.Transactions){setTransactions(response.data.Transactions);}else if(response.data&&response.data.transactions){setTransactions(response.data.transactions);}}catch(error){console.error('Error filtering by date:',error);}finally{setLoading(false);}}};const formatDate=timestamp=>{if(!timestamp)return'N/A';return format(new Date(timestamp*1000),'MMM d, yyyy HH:mm');};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#015F6B]\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Transactions\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"View and manage all your payment transactions\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col sm:flex-row gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(MagnifyingGlassIcon,{className:\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search transactions...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),className:\"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-[#015F6B] focus:border-[#015F6B] sm:text-sm\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFilterChange('all'),className:`px-4 py-2 text-sm font-medium rounded-md ${filter==='all'?'bg-[#015F6B] bg-opacity-20 text-[#015F6B]':'bg-gray-100 text-gray-700 hover:bg-gray-200'}`,children:\"All\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFilterChange('mobile'),className:`px-4 py-2 text-sm font-medium rounded-md ${filter==='mobile'?'bg-[#015F6B] bg-opacity-20 text-[#015F6B]':'bg-gray-100 text-gray-700 hover:bg-gray-200'}`,children:\"Mobile\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFilterChange('bank'),className:`px-4 py-2 text-sm font-medium rounded-md ${filter==='bank'?'bg-[#015F6B] bg-opacity-20 text-[#015F6B]':'bg-gray-100 text-gray-700 hover:bg-gray-200'}`,children:\"Bank\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFilterChange('card'),className:`px-4 py-2 text-sm font-medium rounded-md ${filter==='card'?'bg-[#015F6B] bg-opacity-20 text-[#015F6B]':'bg-gray-100 text-gray-700 hover:bg-gray-200'}`,children:\"Card\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleFilterChange('payouts'),className:`px-4 py-2 text-sm font-medium rounded-md ${filter==='payouts'?'bg-[#015F6B] bg-opacity-20 text-[#015F6B]':'bg-gray-100 text-gray-700 hover:bg-gray-200'}`,children:\"Payouts\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex flex-col sm:flex-row gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:dateRange.startDate,onChange:e=>setDateRange({...dateRange,startDate:e.target.value}),className:\"block px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-[#015F6B] focus:border-[#015F6B]\"}),/*#__PURE__*/_jsx(\"span\",{className:\"flex items-center text-gray-500\",children:\"to\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:dateRange.endDate,onChange:e=>setDateRange({...dateRange,endDate:e.target.value}),className:\"block px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-[#015F6B] focus:border-[#015F6B]\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDateFilter,className:\"px-4 py-2 bg-[#015F6B] text-white text-sm font-medium rounded-md hover:bg-[#00B7AA] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#015F6B]\",children:\"Filter\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm text-gray-600\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{value:statusFilter,onChange:e=>setStatusFilter(e.target.value),className:\"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-[#015F6B] focus:border-[#015F6B] bg-white\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"All\"}),/*#__PURE__*/_jsx(\"option\",{value:\"SUCCESS\",children:\"Success\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PENDING\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"option\",{value:\"FAILED\",children:\"Failed\"})]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white shadow rounded-lg overflow-hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 py-5 sm:p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg leading-6 font-medium text-gray-900 mb-4\",children:[\"Transaction History (\",filteredTransactions.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Transaction\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200\",children:filteredTransactions.map(transaction=>{var _transaction$amount,_transaction$net_amou;return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0 h-10 w-10\",children:getTypeIcon(transaction.source_of_funds)}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm font-medium text-gray-900\",children:transaction.checkout_request_id||`TXN${transaction.id}`}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:transaction.external_id}),transaction.msisdn&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-400\",children:transaction.msisdn})]})]})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800\",children:getTransactionType(transaction)}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500 mt-1\",children:transaction.source_of_funds})]})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium text-gray-900\",children:[(_transaction$amount=transaction.amount)===null||_transaction$amount===void 0?void 0:_transaction$amount.toLocaleString(),\" \",transaction.currency]}),transaction.net_amount&&transaction.net_amount!==transaction.amount&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[\"Net: \",(_transaction$net_amou=transaction.net_amount)===null||_transaction$net_amou===void 0?void 0:_transaction$net_amou.toLocaleString(),\" \",transaction.currency]})]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[getStatusIcon(transaction.transaction_status),/*#__PURE__*/_jsx(\"span\",{className:`ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusColor(transaction.transaction_status)}`,children:transaction.transaction_status})]}),transaction.response_description&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 mt-1\",children:transaction.response_description})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\",children:formatDate(transaction.date_added)}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:/*#__PURE__*/_jsx(\"button\",{className:\"text-[#015F6B] hover:text-[#00B7AA]\",children:\"View Details\"})})]},transaction.id);})})]})}),filteredTransactions.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(BanknotesIcon,{className:\"mx-auto h-12 w-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"No transactions found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Try adjusting your search or filter criteria.\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Transaction Statistics\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-5 sm:grid-cols-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-[#015F6B] bg-opacity-10 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(BanknotesIcon,{className:\"h-8 w-8 text-[#015F6B]\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-[#015F6B]\",children:\"Total Transactions\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-[#015F6B]\",children:transactions.length})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-green-50 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(CheckCircleIcon,{className:\"h-8 w-8 text-green-500\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-green-600\",children:\"Successful\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-green-900\",children:transactions.filter(t=>t.transaction_status==='SUCCESS'||t.transaction_status==='COMPLETE').length})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-yellow-50 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(ClockIcon,{className:\"h-8 w-8 text-yellow-500\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-yellow-600\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-yellow-900\",children:transactions.filter(t=>t.transaction_status==='PENDING').length})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(XCircleIcon,{className:\"h-8 w-8 text-red-500\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-red-600\",children:\"Failed\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-red-900\",children:transactions.filter(t=>t.transaction_status==='FAILED').length})]})]})})]})]})]});};export default Transactions;","map":{"version":3,"names":["React","useState","useEffect","useAuth","CreditCardIcon","BanknotesIcon","ArrowUpIcon","ArrowDownIcon","ClockIcon","CheckCircleIcon","XCircleIcon","FunnelIcon","MagnifyingGlassIcon","DevicePhoneMobileIcon","BuildingLibraryIcon","format","jsx","_jsx","jsxs","_jsxs","Transactions","api","user","transactions","setTransactions","loading","setLoading","filter","setFilter","statusFilter","setStatusFilter","searchTerm","setSearchTerm","dateRange","setDateRange","startDate","endDate","loadTransactions","endpoint","console","log","baseURL","defaults","headers","fullURL","response","get","data","length","id","amount","currency","transaction_status","date_added","source_of_funds","transaction_report","msisdn","external_id","checkout_request_id","error","_error$response","_error$response2","_error$response3","_error$config","_error$config2","_error$config3","message","status","statusText","config","url","method","getStatusIcon","className","getStatusColor","getTypeIcon","sourceOfFunds","getTransactionType","transaction","filteredTransactions","_transaction$external","_transaction$checkout","_transaction$msisdn","_transaction$source_o","matchesSearch","toLowerCase","includes","toUpperCase","matchesStatus","handleFilterChange","newFilter","handleDateFilter","startTimestamp","Math","floor","Date","getTime","endTimestamp","formatDate","timestamp","children","type","placeholder","value","onChange","e","target","onClick","map","_transaction$amount","_transaction$net_amou","toLocaleString","net_amount","response_description","t"],"sources":["/home/joel/projects/davy/merchants dashboard/src/pages/Transactions.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport {\n  CreditCardIcon,\n  BanknotesIcon,\n  ArrowUpIcon,\n  ArrowDownIcon,\n  ClockIcon,\n  CheckCircleIcon,\n  XCircleIcon,\n  FunnelIcon,\n  MagnifyingGlassIcon,\n  DevicePhoneMobileIcon,\n  BuildingLibraryIcon\n} from '@heroicons/react/24/outline';\nimport { format } from 'date-fns';\n\nconst Transactions = () => {\n  const { api, user } = useAuth();\n  const [transactions, setTransactions] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState('all');\n  const [statusFilter, setStatusFilter] = useState('all');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [dateRange, setDateRange] = useState({\n    startDate: '',\n    endDate: ''\n  });\n  useEffect(() => {\n    loadTransactions();\n  }, [filter]);\n\n  const loadTransactions = async () => {\n    try {\n      setLoading(true);\n      let endpoint = '/api/v1/transaction/list';\n      \n      // Apply filters based on selection\n      if (filter === 'mobile') {\n        endpoint = '/api/v1/transaction/read/payins';\n      } else if (filter === 'bank') {\n        endpoint = '/api/v1/transaction/read/bank';\n      } else if (filter === 'card') {\n        endpoint = '/api/v1/transaction/read/card';\n      } else if (filter === 'payouts') {\n        endpoint = '/api/v1/transaction/read/mobile/payouts';\n      }\n\n      console.log('Loading transactions from endpoint:', endpoint);\n      console.log('API configuration:', {\n        baseURL: api.defaults.baseURL,\n        headers: api.defaults.headers,\n        fullURL: `${api.defaults.baseURL}${endpoint}`\n      });\n      \n      const response = await api.get(endpoint);\n      console.log('API Response:', response);\n      console.log('Response data:', response.data);\n      \n      // Handle the correct response format\n      if (response.data && response.data.Transactions) {\n        console.log('Found Transactions array with', response.data.Transactions.length, 'transactions');\n        setTransactions(response.data.Transactions);\n      } else if (response.data && response.data.transactions) {\n        console.log('Found transactions array with', response.data.transactions.length, 'transactions');\n        setTransactions(response.data.transactions);\n      } else {\n        console.log('No transactions found in response, using mock data');\n        // Mock data for demo\n        setTransactions([\n          {\n            id: 14401,\n            amount: 200,\n            currency: 'KES',\n            transaction_status: 'SUCCESS',\n            date_added: 1755762760,\n            source_of_funds: 'M-Pesa',\n            transaction_report: 'withdraw',\n            msisdn: '+254704 763 887',\n            external_id: 'App-e6d4a132-c083-488e-aa7a-5923ab614c52',\n            checkout_request_id: 'AG_20250821_204024443a229f501022'\n          },\n          {\n            id: 14400,\n            amount: 300,\n            currency: 'KES',\n            transaction_status: 'PENDING',\n            date_added: 1755760510,\n            source_of_funds: 'M-Pesa',\n            transaction_report: 'withdraw',\n            msisdn: '+254743331886',\n            external_id: 'App-fac47c92-ac24-4f10-8133-f6c470e85e2f',\n            checkout_request_id: 'AG_20250821_20502dbf96c528349d5e'\n          },\n          {\n            id: 14399,\n            amount: 15000,\n            currency: 'USD',\n            transaction_status: 'SUCCESS',\n            date_added: 1755758260,\n            source_of_funds: 'Card',\n            transaction_report: 'payment',\n            msisdn: '',\n            external_id: 'App-card-payment-123',\n            checkout_request_id: 'CARD_20250821_123456'\n          },\n          {\n            id: 14398,\n            amount: 50000,\n            currency: 'KES',\n            transaction_status: 'FAILED',\n            date_added: 1755756010,\n            source_of_funds: 'Bank',\n            transaction_report: 'transfer',\n            msisdn: '',\n            external_id: 'App-bank-transfer-456',\n            checkout_request_id: 'BANK_20250821_789012'\n          }\n        ]);\n      }\n    } catch (error) {\n      console.error('Error loading transactions:', error);\n      console.error('Error details:', {\n        message: error.message,\n        status: error.response?.status,\n        statusText: error.response?.statusText,\n        data: error.response?.data,\n        config: {\n          url: error.config?.url,\n          method: error.config?.method,\n          headers: error.config?.headers\n        }\n      });\n      \n      // Set mock data on error for demo\n      setTransactions([\n        {\n          id: 14401,\n          amount: 200,\n          currency: 'KES',\n          transaction_status: 'SUCCESS',\n          date_added: 1755762760,\n          source_of_funds: 'M-Pesa',\n          transaction_report: 'withdraw',\n          msisdn: '+254704 763 887',\n          external_id: 'App-e6d4a132-c083-488e-aa7a-5923ab614c52',\n          checkout_request_id: 'AG_20250821_204024443a229f501022'\n        },\n        {\n          id: 14400,\n          amount: 300,\n          currency: 'KES',\n          transaction_status: 'PENDING',\n          date_added: 1755760510,\n          source_of_funds: 'M-Pesa',\n          transaction_report: 'withdraw',\n          msisdn: '+254743331886',\n          external_id: 'App-fac47c92-ac24-4f10-8133-f6c470e85e2f',\n          checkout_request_id: 'AG_20250821_20502dbf96c528349d5e'\n        }\n      ]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStatusIcon = (status) => {\n    switch (status) {\n      case 'SUCCESS':\n      case 'COMPLETE':\n        return <CheckCircleIcon className=\"h-5 w-5 text-green-500\" />;\n      case 'PENDING':\n        return <ClockIcon className=\"h-5 w-5 text-yellow-500\" />;\n      case 'FAILED':\n        return <XCircleIcon className=\"h-5 w-5 text-red-500\" />;\n      default:\n        return <ClockIcon className=\"h-5 w-5 text-gray-500\" />;\n    }\n  };\n\n  const getStatusColor = (status) => {\n    switch (status) {\n      case 'SUCCESS':\n      case 'COMPLETE':\n        return 'text-green-600 bg-green-100';\n      case 'PENDING':\n        return 'text-yellow-600 bg-yellow-100';\n      case 'FAILED':\n        return 'text-red-600 bg-red-100';\n      default:\n        return 'text-gray-600 bg-gray-100';\n    }\n  };\n\n  const getTypeIcon = (sourceOfFunds) => {\n    switch (sourceOfFunds) {\n      case 'M-Pesa':\n        return <DevicePhoneMobileIcon className=\"h-5 w-5 text-[#015F6B]\" />;\n      case 'Card':\n        return <CreditCardIcon className=\"h-5 w-5 text-[#00B7AA]\" />;\n      case 'Bank':\n        return <BuildingLibraryIcon className=\"h-5 w-5 text-[#B5AFB2]\" />;\n      default:\n        return <BanknotesIcon className=\"h-5 w-5 text-gray-500\" />;\n    }\n  };\n\n  const getTransactionType = (transaction) => {\n    if (transaction.transaction_report === 'withdraw') {\n      return 'payout';\n    } else if (transaction.transaction_report === 'payment') {\n      return 'payment';\n    } else if (transaction.transaction_report === 'transfer') {\n      return 'transfer';\n    }\n    return 'payment';\n  };\n\n  const filteredTransactions = transactions.filter(transaction => {\n    const matchesSearch = \n      transaction.external_id?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      transaction.checkout_request_id?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      transaction.msisdn?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      transaction.source_of_funds?.toLowerCase().includes(searchTerm.toLowerCase());\n    const status = (transaction.transaction_status || '').toUpperCase();\n    const matchesStatus =\n      statusFilter === 'all' ||\n      status === statusFilter ||\n      (statusFilter === 'SUCCESS' && status === 'COMPLETE');\n    return matchesSearch && matchesStatus;\n  });\n\n  const handleFilterChange = (newFilter) => {\n    setFilter(newFilter);\n  };\n\n  const handleDateFilter = async () => {\n    if (dateRange.startDate && dateRange.endDate) {\n      try {\n        setLoading(true);\n        const startTimestamp = Math.floor(new Date(dateRange.startDate).getTime() / 1000);\n        const endTimestamp = Math.floor(new Date(dateRange.endDate).getTime() / 1000);\n        \n        const response = await api.get(`/api/v1/transaction/filter?start_date=${startTimestamp}&end_date=${endTimestamp}`);\n        if (response.data && response.data.Transactions) {\n          setTransactions(response.data.Transactions);\n        } else if (response.data && response.data.transactions) {\n          setTransactions(response.data.transactions);\n        }\n      } catch (error) {\n        console.error('Error filtering by date:', error);\n      } finally {\n        setLoading(false);\n      }\n    }\n  };\n\n  const formatDate = (timestamp) => {\n    if (!timestamp) return 'N/A';\n    return format(new Date(timestamp * 1000), 'MMM d, yyyy HH:mm');\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#015F6B]\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Transactions</h1>\n        <p className=\"mt-1 text-sm text-gray-500\">\n          View and manage all your payment transactions\n        </p>\n      </div>\n\n\n\n      {/* Filters */}\n      <div className=\"bg-white shadow rounded-lg p-6\">\n        <div className=\"flex flex-col sm:flex-row gap-4\">\n          {/* Search */}\n          <div className=\"flex-1\">\n            <div className=\"relative\">\n              <MagnifyingGlassIcon className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\n              <input\n                type=\"text\"\n                placeholder=\"Search transactions...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-[#015F6B] focus:border-[#015F6B] sm:text-sm\"\n              />\n            </div>\n          </div>\n\n          {/* Type Filter */}\n          <div className=\"flex gap-2\">\n            <button\n              onClick={() => handleFilterChange('all')}\n              className={`px-4 py-2 text-sm font-medium rounded-md ${\n                filter === 'all'\n                  ? 'bg-[#015F6B] bg-opacity-20 text-[#015F6B]'\n                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              All\n            </button>\n            <button\n              onClick={() => handleFilterChange('mobile')}\n              className={`px-4 py-2 text-sm font-medium rounded-md ${\n                filter === 'mobile'\n                  ? 'bg-[#015F6B] bg-opacity-20 text-[#015F6B]'\n                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              Mobile\n            </button>\n            <button\n              onClick={() => handleFilterChange('bank')}\n              className={`px-4 py-2 text-sm font-medium rounded-md ${\n                filter === 'bank'\n                  ? 'bg-[#015F6B] bg-opacity-20 text-[#015F6B]'\n                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              Bank\n            </button>\n            <button\n              onClick={() => handleFilterChange('card')}\n              className={`px-4 py-2 text-sm font-medium rounded-md ${\n                filter === 'card'\n                  ? 'bg-[#015F6B] bg-opacity-20 text-[#015F6B]'\n                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              Card\n            </button>\n            <button\n              onClick={() => handleFilterChange('payouts')}\n              className={`px-4 py-2 text-sm font-medium rounded-md ${\n                filter === 'payouts'\n                  ? 'bg-[#015F6B] bg-opacity-20 text-[#015F6B]'\n                  : 'bg-gray-100 text-gray-700 hover:bg-gray-200'\n              }`}\n            >\n              Payouts\n            </button>\n          </div>\n        </div>\n\n        {/* Date Range Filter */}\n        <div className=\"mt-4 flex flex-col sm:flex-row gap-4\">\n          <div className=\"flex gap-2\">\n            <input\n              type=\"date\"\n              value={dateRange.startDate}\n              onChange={(e) => setDateRange({ ...dateRange, startDate: e.target.value })}\n              className=\"block px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-[#015F6B] focus:border-[#015F6B]\"\n            />\n            <span className=\"flex items-center text-gray-500\">to</span>\n            <input\n              type=\"date\"\n              value={dateRange.endDate}\n              onChange={(e) => setDateRange({ ...dateRange, endDate: e.target.value })}\n              className=\"block px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-[#015F6B] focus:border-[#015F6B]\"\n            />\n            <button\n              onClick={handleDateFilter}\n              className=\"px-4 py-2 bg-[#015F6B] text-white text-sm font-medium rounded-md hover:bg-[#00B7AA] focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#015F6B]\"\n            >\n              Filter\n            </button>\n          </div>\n          {/* Status Filter */}\n          <div className=\"flex items-center gap-2\">\n            <label className=\"text-sm text-gray-600\">Status</label>\n            <select\n              value={statusFilter}\n              onChange={(e) => setStatusFilter(e.target.value)}\n              className=\"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-[#015F6B] focus:border-[#015F6B] bg-white\"\n            >\n              <option value=\"all\">All</option>\n              <option value=\"SUCCESS\">Success</option>\n              <option value=\"PENDING\">Pending</option>\n              <option value=\"FAILED\">Failed</option>\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Transactions Table */}\n      <div className=\"bg-white shadow rounded-lg overflow-hidden\">\n        <div className=\"px-4 py-5 sm:p-6\">\n          <h3 className=\"text-lg leading-6 font-medium text-gray-900 mb-4\">\n            Transaction History ({filteredTransactions.length})\n          </h3>\n          \n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full divide-y divide-gray-200\">\n              <thead className=\"bg-gray-50\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Transaction\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Type\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Amount\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Status\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Date\n                  </th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                    Actions\n                  </th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200\">\n                {filteredTransactions.map((transaction) => (\n                  <tr key={transaction.id} className=\"hover:bg-gray-50\">\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"flex items-center\">\n                        <div className=\"flex-shrink-0 h-10 w-10\">\n                          {getTypeIcon(transaction.source_of_funds)}\n                        </div>\n                        <div className=\"ml-4\">\n                          <div className=\"text-sm font-medium text-gray-900\">\n                            {transaction.checkout_request_id || `TXN${transaction.id}`}\n                          </div>\n                          <div className=\"text-sm text-gray-500\">\n                            {transaction.external_id}\n                          </div>\n                          {transaction.msisdn && (\n                            <div className=\"text-xs text-gray-400\">\n                              {transaction.msisdn}\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"flex flex-col\">\n                        <span className=\"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800\">\n                          {getTransactionType(transaction)}\n                        </span>\n                        <span className=\"text-xs text-gray-500 mt-1\">\n                          {transaction.source_of_funds}\n                        </span>\n                      </div>\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"text-sm font-medium text-gray-900\">\n                        {transaction.amount?.toLocaleString()} {transaction.currency}\n                      </div>\n                      {transaction.net_amount && transaction.net_amount !== transaction.amount && (\n                        <div className=\"text-xs text-gray-500\">\n                          Net: {transaction.net_amount?.toLocaleString()} {transaction.currency}\n                        </div>\n                      )}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\n                      <div className=\"flex items-center\">\n                        {getStatusIcon(transaction.transaction_status)}\n                        <span className={`ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getStatusColor(transaction.transaction_status)}`}>\n                          {transaction.transaction_status}\n                        </span>\n                      </div>\n                      {transaction.response_description && (\n                        <div className=\"text-xs text-gray-500 mt-1\">\n                          {transaction.response_description}\n                        </div>\n                      )}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-500\">\n                      {formatDate(transaction.date_added)}\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                      <button className=\"text-[#015F6B] hover:text-[#00B7AA]\">\n                        View Details\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n\n          {filteredTransactions.length === 0 && (\n            <div className=\"text-center py-12\">\n              <BanknotesIcon className=\"mx-auto h-12 w-12 text-gray-400\" />\n              <h3 className=\"mt-2 text-sm font-medium text-gray-900\">No transactions found</h3>\n              <p className=\"mt-1 text-sm text-gray-500\">\n                Try adjusting your search or filter criteria.\n              </p>\n            </div>\n          )}\n        </div>\n      </div>\n\n             {/* Transaction Statistics */}\n       <div className=\"bg-white shadow rounded-lg p-6\">\n         <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Transaction Statistics</h3>\n         <div className=\"grid grid-cols-1 gap-5 sm:grid-cols-4\">\n           <div className=\"bg-[#015F6B] bg-opacity-10 rounded-lg p-4\">\n             <div className=\"flex items-center\">\n               <BanknotesIcon className=\"h-8 w-8 text-[#015F6B]\" />\n               <div className=\"ml-4\">\n                 <p className=\"text-sm font-medium text-[#015F6B]\">Total Transactions</p>\n                 <p className=\"text-2xl font-semibold text-[#015F6B]\">{transactions.length}</p>\n               </div>\n             </div>\n           </div>\n           <div className=\"bg-green-50 rounded-lg p-4\">\n             <div className=\"flex items-center\">\n               <CheckCircleIcon className=\"h-8 w-8 text-green-500\" />\n               <div className=\"ml-4\">\n                 <p className=\"text-sm font-medium text-green-600\">Successful</p>\n                 <p className=\"text-2xl font-semibold text-green-900\">\n                   {transactions.filter(t => (t.transaction_status === 'SUCCESS' || t.transaction_status === 'COMPLETE')).length}\n                 </p>\n               </div>\n             </div>\n           </div>\n           <div className=\"bg-yellow-50 rounded-lg p-4\">\n             <div className=\"flex items-center\">\n               <ClockIcon className=\"h-8 w-8 text-yellow-500\" />\n               <div className=\"ml-4\">\n                 <p className=\"text-sm font-medium text-yellow-600\">Pending</p>\n                 <p className=\"text-2xl font-semibold text-yellow-900\">\n                   {transactions.filter(t => t.transaction_status === 'PENDING').length}\n                 </p>\n               </div>\n             </div>\n           </div>\n           <div className=\"bg-red-50 rounded-lg p-4\">\n             <div className=\"flex items-center\">\n               <XCircleIcon className=\"h-8 w-8 text-red-500\" />\n               <div className=\"ml-4\">\n                 <p className=\"text-sm font-medium text-red-600\">Failed</p>\n                 <p className=\"text-2xl font-semibold text-red-900\">\n                   {transactions.filter(t => t.transaction_status === 'FAILED').length}\n                 </p>\n               </div>\n             </div>\n           </div>\n         </div>\n       </div>\n    </div>\n  );\n};\n\nexport default Transactions;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}