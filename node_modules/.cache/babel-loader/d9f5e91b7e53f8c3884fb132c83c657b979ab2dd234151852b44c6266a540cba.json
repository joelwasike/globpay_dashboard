{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuth}from'../contexts/AuthContext';import{LineChart,Line,AreaChart,Area,BarChart,Bar,PieChart,Pie,Cell,XAxis,YAxis,CartesianGrid,Tooltip,Legend,ResponsiveContainer}from'recharts';import{ChartBarIcon,ArrowTrendingUpIcon,DocumentTextIcon,UserGroupIcon,ClockIcon,ExclamationTriangleIcon,CreditCardIcon,DevicePhoneMobileIcon,BuildingLibraryIcon,CurrencyDollarIcon}from'@heroicons/react/24/outline';import{format,subDays,startOfDay,endOfDay}from'date-fns';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Analytics=()=>{const{api}=useAuth();const[transactions,setTransactions]=useState([]);const[loading,setLoading]=useState(true);const[transactionStats,setTransactionStats]=useState({total:0,successful:0,pending:0,failed:0,totalAmount:0});const[dailyTransactionData,setDailyTransactionData]=useState([]);const[paymentMethodDistribution,setPaymentMethodDistribution]=useState([]);const[currencyDistribution,setCurrencyDistribution]=useState([]);const[recentActivity,setRecentActivity]=useState([]);useEffect(()=>{loadAnalyticsData();},[]);const loadAnalyticsData=async()=>{try{var _response$data,_response$data2;setLoading(true);// Fetch transactions\nconst response=await api.get('/api/v1/transaction/list');let txns=[];if((_response$data=response.data)!==null&&_response$data!==void 0&&_response$data.Transactions){txns=response.data.Transactions;}else if((_response$data2=response.data)!==null&&_response$data2!==void 0&&_response$data2.transactions){txns=response.data.transactions;}setTransactions(txns);// Calculate basic stats\nconst stats={total:txns.length,successful:txns.filter(t=>t.transaction_status==='SUCCESS').length,pending:txns.filter(t=>t.transaction_status==='PENDING').length,failed:txns.filter(t=>t.transaction_status==='FAILED').length,totalAmount:txns.reduce((sum,t)=>sum+(t.amount||0),0)};setTransactionStats(stats);// Generate daily transaction data (last 30 days)\nconst dailyData=generateDailyTransactionData(txns);setDailyTransactionData(dailyData);// Generate payment method distribution\nconst paymentMethods=generatePaymentMethodDistribution(txns);setPaymentMethodDistribution(paymentMethods);// Generate currency distribution\nconst currencies=generateCurrencyDistribution(txns);setCurrencyDistribution(currencies);// Generate recent activity\nconst recent=txns.slice(0,10).map(t=>{var _t$amount;return{id:t.id,type:t.source_of_funds||'Payment',message:`${t.source_of_funds||'Payment'} transaction - ${(_t$amount=t.amount)===null||_t$amount===void 0?void 0:_t$amount.toLocaleString()} ${t.currency}`,timestamp:new Date((t.date_added||Date.now()/1000)*1000),severity:t.transaction_status==='SUCCESS'?'success':t.transaction_status==='PENDING'?'warning':'danger',status:t.transaction_status};});setRecentActivity(recent);}catch(error){console.error('Error loading analytics data:',error);// Set mock data on error\nsetMockData();}finally{setLoading(false);}};const generateDailyTransactionData=txns=>{const dailyData=[];const today=new Date();for(let i=29;i>=0;i--){const date=subDays(today,i);const dayStart=startOfDay(date);const dayEnd=endOfDay(date);const dayTransactions=txns.filter(t=>{const txDate=new Date((t.date_added||Date.now()/1000)*1000);return txDate>=dayStart&&txDate<=dayEnd;});const successful=dayTransactions.filter(t=>t.transaction_status==='SUCCESS');const failed=dayTransactions.filter(t=>t.transaction_status==='FAILED');const pending=dayTransactions.filter(t=>t.transaction_status==='PENDING');dailyData.push({date:format(date,'MMM dd'),successful:successful.length,failed:failed.length,pending:pending.length,total:dayTransactions.length,amount:dayTransactions.reduce((sum,t)=>sum+(t.amount||0),0)});}return dailyData;};const generatePaymentMethodDistribution=txns=>{const methodCounts={};txns.forEach(t=>{const method=t.source_of_funds||'Unknown';methodCounts[method]=(methodCounts[method]||0)+1;});const colors=['#3B82F6','#10B981','#F59E0B','#EF4444','#8B5CF6'];return Object.entries(methodCounts).map((_ref,index)=>{let[method,count]=_ref;return{name:method,value:count,color:colors[index%colors.length]};});};const generateCurrencyDistribution=txns=>{const currencyCounts={};txns.forEach(t=>{const currency=t.currency||'Unknown';currencyCounts[currency]=(currencyCounts[currency]||0)+1;});const colors=['#3B82F6','#10B981','#F59E0B','#EF4444','#8B5CF6'];return Object.entries(currencyCounts).map((_ref2,index)=>{let[currency,count]=_ref2;return{name:currency,value:count,color:colors[index%colors.length]};});};const setMockData=()=>{// Set mock data when API fails\nconst mockTxns=[{id:1,amount:1000,currency:'KES',transaction_status:'SUCCESS',source_of_funds:'M-Pesa',date_added:Date.now()/1000},{id:2,amount:2000,currency:'USD',transaction_status:'SUCCESS',source_of_funds:'Card',date_added:Date.now()/1000}];setTransactions(mockTxns);setTransactionStats({total:2,successful:2,pending:0,failed:0,totalAmount:3000});};const getEventIcon=type=>{switch(type){case'M-Pesa':return/*#__PURE__*/_jsx(DevicePhoneMobileIcon,{className:\"h-4 w-4 text-blue-500\"});case'Card':return/*#__PURE__*/_jsx(CreditCardIcon,{className:\"h-4 w-4 text-green-500\"});case'Bank':return/*#__PURE__*/_jsx(BuildingLibraryIcon,{className:\"h-4 w-4 text-purple-500\"});default:return/*#__PURE__*/_jsx(CurrencyDollarIcon,{className:\"h-4 w-4 text-gray-500\"});}};const getSeverityColor=severity=>{switch(severity){case'success':return'bg-green-100 text-green-800';case'warning':return'bg-yellow-100 text-yellow-800';case'danger':return'bg-red-100 text-red-800';case'info':return'bg-blue-100 text-blue-800';default:return'bg-gray-100 text-gray-800';}};const formatCurrency=function(value){let currency=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'KES';return new Intl.NumberFormat('en-US',{style:'currency',currency:currency,minimumFractionDigits:0,maximumFractionDigits:0}).format(value);};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center h-64\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#015F6B]\"})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900\",children:\"Analytics Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:\"Real-time insights and performance metrics based on transaction data\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(CreditCardIcon,{className:\"h-8 w-8 text-[#015F6B]\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Total Transactions\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:transactionStats.total})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(ArrowTrendingUpIcon,{className:\"h-8 w-8 text-green-500\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Successful\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:transactionStats.successful})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(ClockIcon,{className:\"h-8 w-8 text-yellow-500\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Pending\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:transactionStats.pending})]})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white overflow-hidden shadow rounded-lg\",children:/*#__PURE__*/_jsx(\"div\",{className:\"p-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:/*#__PURE__*/_jsx(CurrencyDollarIcon,{className:\"h-8 w-8 text-purple-500\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-500\",children:\"Total Amount\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-semibold text-gray-900\",children:formatCurrency(transactionStats.totalAmount)})]})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(ArrowTrendingUpIcon,{className:\"h-5 w-5 mr-2\"}),\"Transaction Trends (Last 30 Days)\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"h-80\",children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(AreaChart,{data:dailyTransactionData,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"date\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{formatter:(value,name)=>[value,name==='amount'?'Amount (KES)':name],labelFormatter:label=>`Date: ${label}`}),/*#__PURE__*/_jsx(Legend,{}),/*#__PURE__*/_jsx(Area,{type:\"monotone\",dataKey:\"successful\",stackId:\"1\",stroke:\"#10B981\",fill:\"#10B981\",fillOpacity:0.6,name:\"Successful\"}),/*#__PURE__*/_jsx(Area,{type:\"monotone\",dataKey:\"pending\",stackId:\"1\",stroke:\"#F59E0B\",fill:\"#F59E0B\",fillOpacity:0.6,name:\"Pending\"}),/*#__PURE__*/_jsx(Area,{type:\"monotone\",dataKey:\"failed\",stackId:\"1\",stroke:\"#EF4444\",fill:\"#EF4444\",fillOpacity:0.6,name:\"Failed\"})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-6 lg:grid-cols-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(CreditCardIcon,{className:\"h-5 w-5 mr-2\"}),\"Payment Method Distribution\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"h-80\",children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(PieChart,{children:[/*#__PURE__*/_jsx(Pie,{data:paymentMethodDistribution,cx:\"50%\",cy:\"50%\",labelLine:false,label:_ref3=>{let{name,percent}=_ref3;return`${name} ${(percent*100).toFixed(0)}%`;},outerRadius:80,fill:\"#8884d8\",dataKey:\"value\",children:paymentMethodDistribution.map((entry,index)=>/*#__PURE__*/_jsx(Cell,{fill:entry.color},`cell-${index}`))}),/*#__PURE__*/_jsx(Tooltip,{formatter:value=>[`${value} transactions`,'Count']})]})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(CurrencyDollarIcon,{className:\"h-5 w-5 mr-2\"}),\"Currency Distribution\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"h-80\",children:/*#__PURE__*/_jsx(ResponsiveContainer,{width:\"100%\",height:\"100%\",children:/*#__PURE__*/_jsxs(BarChart,{data:currencyDistribution,children:[/*#__PURE__*/_jsx(CartesianGrid,{strokeDasharray:\"3 3\"}),/*#__PURE__*/_jsx(XAxis,{dataKey:\"name\"}),/*#__PURE__*/_jsx(YAxis,{}),/*#__PURE__*/_jsx(Tooltip,{formatter:value=>[`${value} transactions`,'Count']}),/*#__PURE__*/_jsx(Bar,{dataKey:\"value\",fill:\"#3B82F6\"})]})})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4 flex items-center\",children:[/*#__PURE__*/_jsx(ClockIcon,{className:\"h-5 w-5 mr-2\"}),\"Recent Transaction Activity\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:recentActivity.map(event=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex-shrink-0\",children:getEventIcon(event.type)}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:event.message}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:format(event.timestamp,'MMM d, yyyy HH:mm')})]}),/*#__PURE__*/_jsx(\"span\",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getSeverityColor(event.severity)}`,children:event.status})]},event.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow rounded-lg p-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-medium text-gray-900 mb-4\",children:\"Performance Metrics\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 gap-4 sm:grid-cols-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-3xl font-bold text-[#015F6B]\",children:[transactionStats.total>0?(transactionStats.successful/transactionStats.total*100).toFixed(1):0,\"%\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"Success Rate\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-green-600\",children:transactionStats.total>0?(transactionStats.total/30).toFixed(1):0}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"Avg Daily Transactions\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-3xl font-bold text-purple-600\",children:transactionStats.total>0?formatCurrency(transactionStats.totalAmount/transactionStats.total):'0'}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500\",children:\"Average Transaction Value\"})]})]})]})]});};export default Analytics;","map":{"version":3,"names":["React","useState","useEffect","useAuth","LineChart","Line","AreaChart","Area","BarChart","Bar","PieChart","Pie","Cell","XAxis","YAxis","CartesianGrid","Tooltip","Legend","ResponsiveContainer","ChartBarIcon","ArrowTrendingUpIcon","DocumentTextIcon","UserGroupIcon","ClockIcon","ExclamationTriangleIcon","CreditCardIcon","DevicePhoneMobileIcon","BuildingLibraryIcon","CurrencyDollarIcon","format","subDays","startOfDay","endOfDay","jsx","_jsx","jsxs","_jsxs","Analytics","api","transactions","setTransactions","loading","setLoading","transactionStats","setTransactionStats","total","successful","pending","failed","totalAmount","dailyTransactionData","setDailyTransactionData","paymentMethodDistribution","setPaymentMethodDistribution","currencyDistribution","setCurrencyDistribution","recentActivity","setRecentActivity","loadAnalyticsData","_response$data","_response$data2","response","get","txns","data","Transactions","stats","length","filter","t","transaction_status","reduce","sum","amount","dailyData","generateDailyTransactionData","paymentMethods","generatePaymentMethodDistribution","currencies","generateCurrencyDistribution","recent","slice","map","_t$amount","id","type","source_of_funds","message","toLocaleString","currency","timestamp","Date","date_added","now","severity","status","error","console","setMockData","today","i","date","dayStart","dayEnd","dayTransactions","txDate","push","methodCounts","forEach","method","colors","Object","entries","_ref","index","count","name","value","color","currencyCounts","_ref2","mockTxns","getEventIcon","className","getSeverityColor","formatCurrency","arguments","undefined","Intl","NumberFormat","style","minimumFractionDigits","maximumFractionDigits","children","width","height","strokeDasharray","dataKey","formatter","labelFormatter","label","stackId","stroke","fill","fillOpacity","cx","cy","labelLine","_ref3","percent","toFixed","outerRadius","entry","event"],"sources":["/home/joel/projects/davy/merchants dashboard/src/pages/Analytics.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useAuth } from '../contexts/AuthContext';\nimport {\n  LineChart,\n  Line,\n  AreaChart,\n  Area,\n  BarChart,\n  Bar,\n  PieChart,\n  Pie,\n  Cell,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  Legend,\n  ResponsiveContainer\n} from 'recharts';\nimport {\n  ChartBarIcon,\n  ArrowTrendingUpIcon,\n  DocumentTextIcon,\n  UserGroupIcon,\n  ClockIcon,\n  ExclamationTriangleIcon,\n  CreditCardIcon,\n  DevicePhoneMobileIcon,\n  BuildingLibraryIcon,\n  CurrencyDollarIcon\n} from '@heroicons/react/24/outline';\nimport { format, subDays, startOfDay, endOfDay } from 'date-fns';\n\nconst Analytics = () => {\n  const { api } = useAuth();\n  const [transactions, setTransactions] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [transactionStats, setTransactionStats] = useState({\n    total: 0,\n    successful: 0,\n    pending: 0,\n    failed: 0,\n    totalAmount: 0\n  });\n  const [dailyTransactionData, setDailyTransactionData] = useState([]);\n  const [paymentMethodDistribution, setPaymentMethodDistribution] = useState([]);\n  const [currencyDistribution, setCurrencyDistribution] = useState([]);\n  const [recentActivity, setRecentActivity] = useState([]);\n\n  useEffect(() => {\n    loadAnalyticsData();\n  }, []);\n\n  const loadAnalyticsData = async () => {\n    try {\n      setLoading(true);\n      \n      // Fetch transactions\n      const response = await api.get('/api/v1/transaction/list');\n      let txns = [];\n      \n      if (response.data?.Transactions) {\n        txns = response.data.Transactions;\n      } else if (response.data?.transactions) {\n        txns = response.data.transactions;\n      }\n\n      setTransactions(txns);\n\n      // Calculate basic stats\n      const stats = {\n        total: txns.length,\n        successful: txns.filter(t => t.transaction_status === 'SUCCESS').length,\n        pending: txns.filter(t => t.transaction_status === 'PENDING').length,\n        failed: txns.filter(t => t.transaction_status === 'FAILED').length,\n        totalAmount: txns.reduce((sum, t) => sum + (t.amount || 0), 0)\n      };\n      setTransactionStats(stats);\n\n      // Generate daily transaction data (last 30 days)\n      const dailyData = generateDailyTransactionData(txns);\n      setDailyTransactionData(dailyData);\n\n      // Generate payment method distribution\n      const paymentMethods = generatePaymentMethodDistribution(txns);\n      setPaymentMethodDistribution(paymentMethods);\n\n      // Generate currency distribution\n      const currencies = generateCurrencyDistribution(txns);\n      setCurrencyDistribution(currencies);\n\n      // Generate recent activity\n      const recent = txns.slice(0, 10).map(t => ({\n        id: t.id,\n        type: t.source_of_funds || 'Payment',\n        message: `${t.source_of_funds || 'Payment'} transaction - ${t.amount?.toLocaleString()} ${t.currency}`,\n        timestamp: new Date((t.date_added || Date.now()/1000) * 1000),\n        severity: t.transaction_status === 'SUCCESS' ? 'success' : \n                 t.transaction_status === 'PENDING' ? 'warning' : 'danger',\n        status: t.transaction_status\n      }));\n      setRecentActivity(recent);\n\n    } catch (error) {\n      console.error('Error loading analytics data:', error);\n      // Set mock data on error\n      setMockData();\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const generateDailyTransactionData = (txns) => {\n    const dailyData = [];\n    const today = new Date();\n    \n    for (let i = 29; i >= 0; i--) {\n      const date = subDays(today, i);\n      const dayStart = startOfDay(date);\n      const dayEnd = endOfDay(date);\n      \n      const dayTransactions = txns.filter(t => {\n        const txDate = new Date((t.date_added || Date.now()/1000) * 1000);\n        return txDate >= dayStart && txDate <= dayEnd;\n      });\n\n      const successful = dayTransactions.filter(t => t.transaction_status === 'SUCCESS');\n      const failed = dayTransactions.filter(t => t.transaction_status === 'FAILED');\n      const pending = dayTransactions.filter(t => t.transaction_status === 'PENDING');\n\n      dailyData.push({\n        date: format(date, 'MMM dd'),\n        successful: successful.length,\n        failed: failed.length,\n        pending: pending.length,\n        total: dayTransactions.length,\n        amount: dayTransactions.reduce((sum, t) => sum + (t.amount || 0), 0)\n      });\n    }\n    \n    return dailyData;\n  };\n\n  const generatePaymentMethodDistribution = (txns) => {\n    const methodCounts = {};\n    txns.forEach(t => {\n      const method = t.source_of_funds || 'Unknown';\n      methodCounts[method] = (methodCounts[method] || 0) + 1;\n    });\n\n    const colors = ['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6'];\n    return Object.entries(methodCounts).map(([method, count], index) => ({\n      name: method,\n      value: count,\n      color: colors[index % colors.length]\n    }));\n  };\n\n  const generateCurrencyDistribution = (txns) => {\n    const currencyCounts = {};\n    txns.forEach(t => {\n      const currency = t.currency || 'Unknown';\n      currencyCounts[currency] = (currencyCounts[currency] || 0) + 1;\n    });\n\n    const colors = ['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6'];\n    return Object.entries(currencyCounts).map(([currency, count], index) => ({\n      name: currency,\n      value: count,\n      color: colors[index % colors.length]\n    }));\n  };\n\n  const setMockData = () => {\n    // Set mock data when API fails\n    const mockTxns = [\n      { id: 1, amount: 1000, currency: 'KES', transaction_status: 'SUCCESS', source_of_funds: 'M-Pesa', date_added: Date.now()/1000 },\n      { id: 2, amount: 2000, currency: 'USD', transaction_status: 'SUCCESS', source_of_funds: 'Card', date_added: Date.now()/1000 }\n    ];\n    setTransactions(mockTxns);\n    setTransactionStats({ total: 2, successful: 2, pending: 0, failed: 0, totalAmount: 3000 });\n  };\n\n  const getEventIcon = (type) => {\n    switch (type) {\n      case 'M-Pesa':\n        return <DevicePhoneMobileIcon className=\"h-4 w-4 text-blue-500\" />;\n      case 'Card':\n        return <CreditCardIcon className=\"h-4 w-4 text-green-500\" />;\n      case 'Bank':\n        return <BuildingLibraryIcon className=\"h-4 w-4 text-purple-500\" />;\n      default:\n        return <CurrencyDollarIcon className=\"h-4 w-4 text-gray-500\" />;\n    }\n  };\n\n  const getSeverityColor = (severity) => {\n    switch (severity) {\n      case 'success':\n        return 'bg-green-100 text-green-800';\n      case 'warning':\n        return 'bg-yellow-100 text-yellow-800';\n      case 'danger':\n        return 'bg-red-100 text-red-800';\n      case 'info':\n        return 'bg-blue-100 text-blue-800';\n      default:\n        return 'bg-gray-100 text-gray-800';\n    }\n  };\n\n  const formatCurrency = (value, currency = 'KES') => {\n    return new Intl.NumberFormat('en-US', {\n      style: 'currency',\n      currency: currency,\n      minimumFractionDigits: 0,\n      maximumFractionDigits: 0\n    }).format(value);\n  };\n\n  if (loading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-[#015F6B]\"></div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div>\n        <h1 className=\"text-2xl font-bold text-gray-900\">Analytics Dashboard</h1>\n        <p className=\"mt-1 text-sm text-gray-500\">\n          Real-time insights and performance metrics based on transaction data\n        </p>\n      </div>\n\n              {/* Key Metrics */}\n        <div className=\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4\">\n          <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n            <div className=\"p-5\">\n              <div className=\"flex items-center\">\n                <div className=\"flex-shrink-0\">\n                  <CreditCardIcon className=\"h-8 w-8 text-[#015F6B]\" />\n                </div>\n                <div className=\"ml-4\">\n                  <p className=\"text-sm font-medium text-gray-500\">Total Transactions</p>\n                  <p className=\"text-2xl font-semibold text-gray-900\">{transactionStats.total}</p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n        <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n          <div className=\"p-5\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <ArrowTrendingUpIcon className=\"h-8 w-8 text-green-500\" />\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-sm font-medium text-gray-500\">Successful</p>\n                <p className=\"text-2xl font-semibold text-gray-900\">{transactionStats.successful}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n          <div className=\"p-5\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <ClockIcon className=\"h-8 w-8 text-yellow-500\" />\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-sm font-medium text-gray-500\">Pending</p>\n                <p className=\"text-2xl font-semibold text-gray-900\">{transactionStats.pending}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white overflow-hidden shadow rounded-lg\">\n          <div className=\"p-5\">\n            <div className=\"flex items-center\">\n              <div className=\"flex-shrink-0\">\n                <CurrencyDollarIcon className=\"h-8 w-8 text-purple-500\" />\n              </div>\n              <div className=\"ml-4\">\n                <p className=\"text-sm font-medium text-gray-500\">Total Amount</p>\n                <p className=\"text-2xl font-semibold text-gray-900\">\n                  {formatCurrency(transactionStats.totalAmount)}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Transaction Trends Chart */}\n      <div className=\"bg-white shadow rounded-lg p-6\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4 flex items-center\">\n          <ArrowTrendingUpIcon className=\"h-5 w-5 mr-2\" />\n          Transaction Trends (Last 30 Days)\n        </h3>\n        <div className=\"h-80\">\n          <ResponsiveContainer width=\"100%\" height=\"100%\">\n            <AreaChart data={dailyTransactionData}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis dataKey=\"date\" />\n              <YAxis />\n              <Tooltip \n                formatter={(value, name) => [value, name === 'amount' ? 'Amount (KES)' : name]}\n                labelFormatter={(label) => `Date: ${label}`}\n              />\n              <Legend />\n              <Area \n                type=\"monotone\" \n                dataKey=\"successful\" \n                stackId=\"1\" \n                stroke=\"#10B981\" \n                fill=\"#10B981\" \n                fillOpacity={0.6}\n                name=\"Successful\"\n              />\n              <Area \n                type=\"monotone\" \n                dataKey=\"pending\" \n                stackId=\"1\" \n                stroke=\"#F59E0B\" \n                fill=\"#F59E0B\" \n                fillOpacity={0.6}\n                name=\"Pending\"\n              />\n              <Area \n                type=\"monotone\" \n                dataKey=\"failed\" \n                stackId=\"1\" \n                stroke=\"#EF4444\" \n                fill=\"#EF4444\" \n                fillOpacity={0.6}\n                name=\"Failed\"\n              />\n            </AreaChart>\n          </ResponsiveContainer>\n        </div>\n      </div>\n\n      <div className=\"grid grid-cols-1 gap-6 lg:grid-cols-2\">\n        {/* Payment Method Distribution */}\n        <div className=\"bg-white shadow rounded-lg p-6\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4 flex items-center\">\n            <CreditCardIcon className=\"h-5 w-5 mr-2\" />\n            Payment Method Distribution\n          </h3>\n          <div className=\"h-80\">\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n              <PieChart>\n                <Pie\n                  data={paymentMethodDistribution}\n                  cx=\"50%\"\n                  cy=\"50%\"\n                  labelLine={false}\n                  label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}\n                  outerRadius={80}\n                  fill=\"#8884d8\"\n                  dataKey=\"value\"\n                >\n                  {paymentMethodDistribution.map((entry, index) => (\n                    <Cell key={`cell-${index}`} fill={entry.color} />\n                  ))}\n                </Pie>\n                <Tooltip formatter={(value) => [`${value} transactions`, 'Count']} />\n              </PieChart>\n            </ResponsiveContainer>\n          </div>\n        </div>\n\n        {/* Currency Distribution */}\n        <div className=\"bg-white shadow rounded-lg p-6\">\n          <h3 className=\"text-lg font-medium text-gray-900 mb-4 flex items-center\">\n            <CurrencyDollarIcon className=\"h-5 w-5 mr-2\" />\n            Currency Distribution\n          </h3>\n          <div className=\"h-80\">\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n              <BarChart data={currencyDistribution}>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis dataKey=\"name\" />\n                <YAxis />\n                <Tooltip formatter={(value) => [`${value} transactions`, 'Count']} />\n                <Bar dataKey=\"value\" fill=\"#3B82F6\" />\n              </BarChart>\n            </ResponsiveContainer>\n          </div>\n        </div>\n      </div>\n\n      {/* Recent Activity */}\n      <div className=\"bg-white shadow rounded-lg p-6\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4 flex items-center\">\n          <ClockIcon className=\"h-5 w-5 mr-2\" />\n          Recent Transaction Activity\n        </h3>\n        <div className=\"space-y-3\">\n          {recentActivity.map((event) => (\n            <div key={event.id} className=\"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg\">\n              <div className=\"flex-shrink-0\">\n                {getEventIcon(event.type)}\n              </div>\n              <div className=\"flex-1\">\n                <p className=\"text-sm font-medium text-gray-900\">{event.message}</p>\n                <p className=\"text-xs text-gray-500\">\n                  {format(event.timestamp, 'MMM d, yyyy HH:mm')}\n                </p>\n              </div>\n              <span className={`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${getSeverityColor(event.severity)}`}>\n                {event.status}\n              </span>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Performance Metrics */}\n      <div className=\"bg-white shadow rounded-lg p-6\">\n        <h3 className=\"text-lg font-medium text-gray-900 mb-4\">Performance Metrics</h3>\n        <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-3\">\n          <div className=\"text-center\">\n            <div className=\"text-3xl font-bold text-[#015F6B]\">\n              {transactionStats.total > 0 ? ((transactionStats.successful / transactionStats.total) * 100).toFixed(1) : 0}%\n            </div>\n            <div className=\"text-sm text-gray-500\">Success Rate</div>\n          </div>\n          <div className=\"text-center\">\n            <div className=\"text-3xl font-bold text-green-600\">\n              {transactionStats.total > 0 ? (transactionStats.total / 30).toFixed(1) : 0}\n            </div>\n            <div className=\"text-sm text-gray-500\">Avg Daily Transactions</div>\n          </div>\n          <div className=\"text-center\">\n            <div className=\"text-3xl font-bold text-purple-600\">\n              {transactionStats.total > 0 ? formatCurrency(transactionStats.totalAmount / transactionStats.total) : '0'}\n            </div>\n            <div className=\"text-sm text-gray-500\">Average Transaction Value</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Analytics; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}