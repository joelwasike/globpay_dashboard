{"ast":null,"code":"import axios from 'axios';\n\n// API base URL configuration\nconst API_BASE_URL = process.env.NODE_ENV === 'development' ? 'https://merchants.globpay.ai' // Use direct URL in development for now\n: 'https://merchants.globpay.ai'; // Direct URL in production\n\nconsole.log('API Configuration:', {\n  NODE_ENV: process.env.NODE_ENV,\n  API_BASE_URL: API_BASE_URL,\n  fullURL: API_BASE_URL + '/api/v1/transaction/read/balance'\n});\n\n// Create axios instance with base URL\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n    'Access-Control-Allow-Origin': '*',\n    'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n    'Access-Control-Allow-Headers': 'Content-Type, Authorization'\n  },\n  withCredentials: false // Disable credentials for CORS\n});\n\n// Add token to requests if available\napi.interceptors.request.use(config => {\n  var _config$method;\n  const token = localStorage.getItem('merchant_token');\n  if (token) {\n    // Try different ways to send the token to handle CORS\n    config.headers.Authorization = `Bearer ${token}`;\n    // Also try as a query parameter if header fails\n    if (!config.params) config.params = {};\n    config.params.token = token;\n  }\n\n  // Log the actual request URL for debugging\n  console.log('API Request:', {\n    method: (_config$method = config.method) === null || _config$method === void 0 ? void 0 : _config$method.toUpperCase(),\n    url: config.url,\n    baseURL: config.baseURL,\n    fullURL: config.baseURL + config.url\n  });\n  return config;\n});\n\n// Add response interceptor for error handling\napi.interceptors.response.use(response => response, error => {\n  console.error('API Error:', error);\n  return Promise.reject(error);\n});\nexport default api;\nexport { API_BASE_URL };","map":{"version":3,"names":["axios","API_BASE_URL","process","env","NODE_ENV","console","log","fullURL","api","create","baseURL","headers","withCredentials","interceptors","request","use","config","_config$method","token","localStorage","getItem","Authorization","params","method","toUpperCase","url","response","error","Promise","reject"],"sources":["/home/joel/projects/davy/merchants dashboard/src/config/api.js"],"sourcesContent":["import axios from 'axios';\n\n// API base URL configuration\nconst API_BASE_URL = process.env.NODE_ENV === 'development' \n  ? 'https://merchants.globpay.ai' // Use direct URL in development for now\n  : 'https://merchants.globpay.ai'; // Direct URL in production\n\nconsole.log('API Configuration:', {\n  NODE_ENV: process.env.NODE_ENV,\n  API_BASE_URL: API_BASE_URL,\n  fullURL: API_BASE_URL + '/api/v1/transaction/read/balance'\n});\n\n// Create axios instance with base URL\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  headers: {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n    'Access-Control-Allow-Origin': '*',\n    'Access-Control-Allow-Methods': 'GET, POST, PUT, DELETE, OPTIONS',\n    'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n  },\n  withCredentials: false, // Disable credentials for CORS\n});\n\n// Add token to requests if available\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem('merchant_token');\n  if (token) {\n    // Try different ways to send the token to handle CORS\n    config.headers.Authorization = `Bearer ${token}`;\n    // Also try as a query parameter if header fails\n    if (!config.params) config.params = {};\n    config.params.token = token;\n  }\n  \n  // Log the actual request URL for debugging\n  console.log('API Request:', {\n    method: config.method?.toUpperCase(),\n    url: config.url,\n    baseURL: config.baseURL,\n    fullURL: config.baseURL + config.url\n  });\n  \n  return config;\n});\n\n// Add response interceptor for error handling\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    console.error('API Error:', error);\n    return Promise.reject(error);\n  }\n);\n\nexport default api;\nexport { API_BASE_URL };\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,MAAMC,YAAY,GAAGC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,aAAa,GACvD,8BAA8B,CAAC;AAAA,EAC/B,8BAA8B,CAAC,CAAC;;AAEpCC,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAE;EAChCF,QAAQ,EAAEF,OAAO,CAACC,GAAG,CAACC,QAAQ;EAC9BH,YAAY,EAAEA,YAAY;EAC1BM,OAAO,EAAEN,YAAY,GAAG;AAC1B,CAAC,CAAC;;AAEF;AACA,MAAMO,GAAG,GAAGR,KAAK,CAACS,MAAM,CAAC;EACvBC,OAAO,EAAET,YAAY;EACrBU,OAAO,EAAE;IACP,cAAc,EAAE,kBAAkB;IAClC,QAAQ,EAAE,kBAAkB;IAC5B,6BAA6B,EAAE,GAAG;IAClC,8BAA8B,EAAE,iCAAiC;IACjE,8BAA8B,EAAE;EAClC,CAAC;EACDC,eAAe,EAAE,KAAK,CAAE;AAC1B,CAAC,CAAC;;AAEF;AACAJ,GAAG,CAACK,YAAY,CAACC,OAAO,CAACC,GAAG,CAAEC,MAAM,IAAK;EAAA,IAAAC,cAAA;EACvC,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,gBAAgB,CAAC;EACpD,IAAIF,KAAK,EAAE;IACT;IACAF,MAAM,CAACL,OAAO,CAACU,aAAa,GAAG,UAAUH,KAAK,EAAE;IAChD;IACA,IAAI,CAACF,MAAM,CAACM,MAAM,EAAEN,MAAM,CAACM,MAAM,GAAG,CAAC,CAAC;IACtCN,MAAM,CAACM,MAAM,CAACJ,KAAK,GAAGA,KAAK;EAC7B;;EAEA;EACAb,OAAO,CAACC,GAAG,CAAC,cAAc,EAAE;IAC1BiB,MAAM,GAAAN,cAAA,GAAED,MAAM,CAACO,MAAM,cAAAN,cAAA,uBAAbA,cAAA,CAAeO,WAAW,CAAC,CAAC;IACpCC,GAAG,EAAET,MAAM,CAACS,GAAG;IACff,OAAO,EAAEM,MAAM,CAACN,OAAO;IACvBH,OAAO,EAAES,MAAM,CAACN,OAAO,GAAGM,MAAM,CAACS;EACnC,CAAC,CAAC;EAEF,OAAOT,MAAM;AACf,CAAC,CAAC;;AAEF;AACAR,GAAG,CAACK,YAAY,CAACa,QAAQ,CAACX,GAAG,CAC1BW,QAAQ,IAAKA,QAAQ,EACrBC,KAAK,IAAK;EACTtB,OAAO,CAACsB,KAAK,CAAC,YAAY,EAAEA,KAAK,CAAC;EAClC,OAAOC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC;AAC9B,CACF,CAAC;AAED,eAAenB,GAAG;AAClB,SAASP,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}